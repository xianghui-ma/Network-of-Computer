# 第 5 章 运输层 #

### 运输层概述 ###

#### 运输层与网络层的区别 ####

区别是：网络层实现的是主机到主机的通信，而运输层实现的是端到端的通信（即两主机进程到进程间的通信）。具体释义如下：

两个主机的通信实际上是两个主机中的相应进程相互通信。而IP协议只是将分组送到目的主机，但这个分组还停留在主机的网络层而没有交付给主机中对应的应用进程。此时，便需要运输层将停留在网络层的数据正确交付到目的应用进程（即运输层的“分用”功能）

> 只有网络上的主机才有运输层，路由器只有`网络层、数据链路层、物理层`

#### 运输层的两个主要协议 ####

- 用户数据报协议UDP（User Datagram Protocol）
- 传输控制协议TCP（Transmission Control Protocol）

UDP不提供可靠交付。UDP在传送数据之前不需要先建立可靠连接。远地主机在收到UDP报文后也不需要给出任何确认

TCP提供可靠交付。TCP在传送数据之前需要先建立可靠连接，数据传输完成后再释放连接

#### 端口 ####

1、端口的作用

上面已经说到——分组到达网络层后，需要由运输层将数据交给对应进程。那么问题是运输层怎么知道交给哪个进程呢？

解决办法就是使用端口（号）

端口介于运输层与应用层之间，用于标识应用层中的各个进程。两个计算机在进行通讯时，需要知道彼此的IP地址与端口号，从而运输层便能根据网络层交上来的数据中的端口号将数据交给相应进程

2、端口的分类

- 服务器端使用的端口号（取值为`0~1023`）。这些端口号被指派给服务器端的应用进程，各自就固定代表相应进程。如下为一些常用的服务器端口号：

![p1]

- 客户端使用的端口号（取值为`49152~65535`）。这些端口号是留给客户主机的进程使用的。当一个进程被创建时系统为其随机分配一个端口号。当该进程被关闭后，它的端口号也被回收给其他进程使用